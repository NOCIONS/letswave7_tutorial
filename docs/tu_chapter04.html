<!DOCTYPE html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">
<title>Chapter 04. Time Domain Analysis | Letswave for documentation</title>
<link rel="stylesheet" href="css/syntax.css">


<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<link rel="stylesheet" href="css/lavish-bootstrap.css">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="documentation-theme-jekyll" href="http://localhost:4000feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Letswave</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                
                
                
                <li><a href="news">News</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Resources<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        <li><a href="https://github.com/NOCIONS/letswave7" target="_blank">Github Repo</a></li>
                        
                        
                        
                        <li><a href="http://letswave.cn" target="_blank">Mirror site</a></li>
                        
                        
                        
                        <li><a href="https://github.com/NOCIONS/letswave6" target="_blank">Letswave6</a></li>
                        
                        
                        
                        <li><a href="http://www.nocions.org/" target="_blank">Nocions Lab</a></li>
                        
                        
                    </ul>
                </li>
                
                
                
			<li>



  <a class="email" title="Submit feedback" href="#" onclick="javascript:window.location='mailto:huanggan1982@gmail.com?subject=Jekyll documentation theme feedback&body=I have some feedback about the Chapter 04. Time Domain Analysis page: ' + window.location.href;"><i class="fa fa-envelope-o"></i> Feedback</a>

</li>

		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Chapter 04. Time Domain Analysis">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
    <div class="col-lg-12">&nbsp;</div>
    <!-- Content Row -->
    <div class="row">
        <!-- Sidebar Column -->
        <div class="col-md-3">

          













<ul id="mysidebar" class="nav" media="print">
    <li class="sidebarTitle"> </li>
    
    
    
        
    
    <li>
        <a href="#">Getting Started</a>
        <ul>
            
            
            
            <li><a href="index.html">1. Welcome to Letswave</a></li>
            
            
            
            
            
            
            <li><a href="gs_general_info.html">2. General Information</a></li>
            
            
            
            
            
            
            <li><a href="gs_download_and_installation.html">3. Download and Installation</a></li>
            
            
            
            
            
            
            <li><a href="gs_framework.html">4. Letswave Framework</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Lestwave Wiki</a>
        <ul>
            
            
            
            <li><a href="wk_all_docs.html">1. All Documents</a></li>
            
            
            
            
            
            
            <li><a href="wk_LW_manager.html">2. Manager Module</a></li>
            
            
            
            
            
            
            <li><a href="wk_LW_batch.html">3. Batch Module</a></li>
            
            
            
            
            
            
            <li><a href="wk_data_structure.html">4. Data structures</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Letswave Tutorial</a>
        <ul>
            
            
            
            <li><a href="tu_getting_started.html">0. Getting Started</a></li>
            
            
            
            
            
            
            <li><a href="tu_signal_subject.html">1. Signal Subject</a></li>
            
            
            
            
            
            
            <li><a href="tu_multiple_subject.html">2. Multiple Subject</a></li>
            
            
            
            
            
            
            <li><a href="tu_multiple_subject.html">3. Figure Genertaion</a></li>
            
            
            
            
            
            
            <li><a href="tu_multiple_subject.html">4. Script Writing</a></li>
            
            
            
            
        </ul>
        
        
    
    <li>
        <a href="#">Single Subject Analysis</a>
        <ul>
            
            
            
            <li><a href="tu_chapter01.html">01. Data Import</a></li>
            
            
            
            
            
            
            <li><a href="tu_chapter02.html">02. Preprocessing</a></li>
            
            
            
            
            
            
            <li><a href="tu_chapter03.html">03. ICA Decomposing</a></li>
            
            
            
            
            
            
            <li class="active"><a href="tu_chapter04.html">04. Time Domain Analysis</a></li>
            
            
            
            
            
            
            <li><a href="tu_chapter05.html">05. Time-Frequency Analysis</a></li>
            
            
            
            
            
            
            <li><a href="tu_chapter06.html">06. Result Observation</a></li>
            
            
            
            
        </ul>
        
        
        
        <!-- if you aren't using the accordion, uncomment this block:
           <p class="external">
               <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
           </p>
           -->
    </li>
</ul>
</div>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

    <!-- Content Column -->
    <div class="col-md-9">
        <div class="post-header">
   <h1 class="post-title-main">Chapter 04. Time Domain Analysis</h1>
</div>



<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    

  <p>In this chapter, we keep on the preprocessing on the P300 dataset after ICA filtering.</p>

<h2 id="step-7-segmentationepoching">Step 7. Segmentation/Epoching</h2>
<p>Select the dataset “<strong><em>sp_filter ica chan_interp butt sel_chan sub093</em></strong>”” in the data list of the manager module, and click <strong>Process-&gt;Epoch segmentation-&gt;Segment relative to events (one file per event code)</strong> in the menu. In the batch module, select Event codes <strong><em>S  9</em></strong> and <strong><em>S 10</em></strong>, and set the epcoh starting time and duration as <strong><em>-1</em></strong> and <strong><em>3</em></strong>. Click the button <strong>Run</strong> in the bottom of batch module, and then two new datasets with the name “<strong><em>ep_S  9 sp_filter ica chan_interp butt sel_chan sub093</em></strong>” and “<strong><em>ep_S 10 sp_filter ica chan_interp butt sel_chan sub093</em></strong>” will be appeared in the data list of the manager module. <br />
<img src="images/tu_chapter04/Fig029.png" alt="Channel location assignment" /></p>

<p>In the menu, there are two items for segmentation, which are <strong>Segment relative to events</strong> and <strong>Segment relative to events (one file per event code)</strong>. They have similar function, but the output would be different. If multiple event codes has been selected, <strong>Segment relative to events</strong>  will segment all the epoches with different event codes into one dataset. However, with <strong>Segment relative to events (one file per event code)</strong>, separated dataset will be generated according to different event codes. For example, in this case of P300 dataset, the target and nontarget events are marked as <strong><em>S  9</em></strong> and <strong><em>S 10</em></strong>. Hence with <strong>Segment relative to events (one file per event code)</strong>, two dataset has been generated.</p>

<h2 id="step-8-artifact-rejection">Step 8. Artifact Rejection</h2>
<p>Before the artifact rejection, it is necessary to have an observation to all the epoches. Select the datasets “<strong><em>ep_S  9 sp_filter ica chan_interp butt sel_chan sub093</em></strong>” and “<strong><em>ep_S 10 sp_filter ica chan_interp butt sel_chan sub093</em></strong>” and select <strong>view</strong> in the right-click menu. In the multiviewer of the waveform, setting epoches as the superimposed waves, and select all epoches.  We select channel <strong><em>Pz</em></strong> for observation since it is the most interesting channel in the P300 analysis. Of cource, we should also have a look at the conditions on the other channels. By setting the y-axis from <strong><em>-100</em></strong> to <strong><em>100</em></strong>, all epoches seem fine on channel Pz. No obviously artifact has been observed for both the two datasets.<br />
<img src="images/tu_chapter04/Fig030a.png" alt="Channel location assignment" />
<img src="images/tu_chapter04/Fig030b.png" alt="Channel location assignment" /></p>

<p>Hence, it is not necessary to perform arfifact rejection on this dataset. We will omit this step in the preprocessing of this P300 dataset. Considering the integrity of this manuel, we still show the operation of artifact rejection. In Letswave7, we provide two methods for artifact rejection.</p>

<p>Fisrtly, we can manually reject the epoches with artifact. For this methods, select the datasets “<strong><em>ep_S  9 sp_filter ica chan_interp butt sel_chan sub093</em></strong>” and “<strong><em>ep_S 10 sp_filter ica chan_interp butt sel_chan sub093</em></strong>”, and click <strong>Edit-&gt;Arrange signals-&gt;Rearrange or delete epochs, channels, indexes</strong> in the menu. In the batch module, set the selection items as “<strong>Epoch</strong>”, and put the epoches you want to keep into the right column. Click the button <strong>Run</strong> in the bottom of batch module to finish the work of artifact rejection. Two new datasets with the name “<strong><em>sel_epoch ep_S  9 sp_filter ica chan_interp butt sel_chan sub093</em></strong>” and “<strong><em>sel_epoch ep_S 10 sp_filter ica chan_interp butt sel_chan sub093</em></strong>” will be appeared in the data list of the manager module.<br />
<img src="images/tu_chapter04/Fig030e.png" alt="Channel location assignment" /></p>

<p>The second method is using some criteria for the artifact rejection, like the value of the EEG signal in certain interval on certain channel exceeding a certain threshold for example. For this methods, select the datasets “<strong><em>ep_S  9 sp_filter ica chan_interp butt sel_chan sub093</em></strong>” and “<strong><em>ep_S 10 sp_filter ica chan_interp butt sel_chan sub093</em></strong>”, and click <strong>Process-&gt;Artefact rejection and suppression-&gt;Reject epoches (amplitude criterion)</strong> in the menu. In the batch module, select the checkbox <strong>Select channels</strong> and select channel <strong>Pz</strong>. If the checkbox is not selected the crition will work on all the channels. On the right select the checkbox <strong>X-axis limits</strong> and set the corresponding interval as <strong>0</strong> to <strong>2</strong> seconds. If the checkbox is not selected, the crition will work on all the range of the x-axis. Since there is data on Y-axis and Z-axis is singleton, we do not need to check these two axises. Click the button <strong>Run</strong> in the bottom of batch module to finish the work of artifact rejection. Two new datasets with the name “<strong><em>ar-amp ep_S  9 sp_filter ica chan_interp butt sel_chan sub093</em></strong>” and “<strong><em>ar-amp ep_S 10 sp_filter ica chan_interp butt sel_chan sub093</em></strong>” will be appeared in the data list of the manager module. In fact, there is not epoches has been rejected, the two new datasets are exactly the same as the previous.<br />
<img src="images/tu_chapter04/Fig030d.png" alt="Channel location assignment" /></p>

<h2 id="step-9-rereference">Step 9. Rereference</h2>
<p>In the study of P300, the average of bilateral mastoids regions normally is selected as reference. Hence, we will rereference to the mean value of TP9 and TP10. Select the datasets “<strong><em>ep_S  9 sp_filter ica chan_interp butt sel_chan sub093</em></strong>” and “<strong><em>ep_S 10 sp_filter ica chan_interp butt sel_chan sub093</em></strong>”, and click <strong>Process-&gt;Rereference signals-&gt;Rereference</strong> in the menu. In the batch module, select the <strong>TP9</strong> and <strong>TP10</strong> as the <strong>new reference</strong> in the left list box and select all channels in the right list box for <strong>apply reference to</strong>. Click the button <strong>Run</strong> in the bottom of batch module to finish the work of artifact rejection. Two new datasets with the name “<strong><em>reref ep_S  9 sp_filter ica chan_interp butt sel_chan sub093</em></strong>” and “<strong><em>reref ep_S 10 sp_filter ica chan_interp butt sel_chan sub093</em></strong>” will be appeared in the data list of the manager module.<br />
<img src="images/tu_chapter04/Fig032.png" alt="Channel location assignment" /></p>

<p>Here, we select TP9 and TP10 for using the mean value of the two channels as the new reference. For the common average reference, we can select all channels in the left list box, then the average of all channels will be used as the new reference.</p>

<h2 id="step-10-baseline-correction">Step 10. Baseline Correction</h2>
<p>In the segmentation, we set the epcoh starting time and duration as <strong><em>-1</em></strong> and <strong><em>3</em></strong>, which means the epoches will start from <strong>-1s</strong> to <strong>2s</strong>. Hence, we set the baseline from <strong>-1s</strong> to <strong>0s</strong> for baseline correction.</p>

<p>Select the datasets “<strong><em>reref ep_S  9 sp_filter ica chan_interp butt sel_chan sub093</em></strong>” and “<strong><em>reref ep_S 10 sp_filter ica chan_interp butt sel_chan sub093</em></strong>”, and click <strong>Process-&gt;Baseline operation-&gt;Baseline correction</strong> in the menu. Keep the dafault setting in the batch module, and click the button <strong>Run</strong> in the bottom of batch module to finish the work of artifact rejection. Two new datasets with the name “<strong><em>bl reref ep_S  9 sp_filter ica chan_interp butt sel_chan sub093</em></strong>” and “<strong><em>bl reref ep_S 10 sp_filter ica chan_interp butt sel_chan sub093</em></strong>” will be appeared in the data list of the manager module.<br />
<img src="images/tu_chapter04/Fig035.png" alt="Channel location assignment" /></p>

<h2 id="averaging">Averaging</h2>
<p>After the ten steps of preprocessing, we can simply average the epoches to do time domain analysis. Select the datasets “<strong><em>bl reref ep_S  9 sp_filter ica chan_interp butt sel_chan sub093</em></strong>” and “<strong><em>bl reref ep_S 10 sp_filter ica chan_interp butt sel_chan sub093</em></strong>”, and click <strong>Process-&gt;Average-&gt;Compute averag, std, median across epoches</strong> in the menu. Keep the dafault setting in the batch module, and click the button <strong>Run</strong> in the bottom of batch module for averaging. Two new datasets with the name “<strong><em>avg bl reref ep_S  9 sp_filter ica chan_interp butt sel_chan sub093</em></strong>” and “<strong><em>avg bl reref ep_S 10 sp_filter ica chan_interp butt sel_chan sub093</em></strong>” will be appeared in the data list of the manager module.<br />
<img src="images/tu_chapter04/Fig038.png" alt="Channel location assignment" /></p>

<p>After the time domain analysis, we can have an observation of the result in <a href="tu_chapter06.html">chapter 06</a>. In this part, we demonstrated the preprocessing and time domain analysis step by step. For each step, there would be a prefix, such as butt, ica, and reref, added in the file names. Hence from the name of the dataset, we have a gereral understanding of the processing steps. More advanced tutorial for batch precessing and script.</p>



    <div class="tags">
        
    </div>

    

</div>

<hr class="shaded"/>

<footer>
        <div class="row">
            <div class="col-lg-12 footer">
               <a href="https://pages.coding.me"><img src="images/CodingPage_small.png" alt="Company logo"/></a>
               
               <span style="display:inline-block;" >
               	&copy;2018 Lestwave.cn. All rights reserved.<br />
				 Site last generated: Aug 31, 2018<br/>
				</span>
                </div>
        </div>
</footer>


    </div>
    <!-- /.row -->
</div>
<!-- /.container -->
    </div>

</body>

</html>