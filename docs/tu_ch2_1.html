<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">
<title>Chapter 2-1. Grand Average | Letswave.cn</title>
<link rel="stylesheet" href="css/syntax.css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/boxshadowproperties.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://localhost:4000/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Letswave7</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->




                
                
                
                <li><a href="https://github.com/NOCIONS/letswave7" target="_blank">Download</a></li>
                
                
                
                <li><a href="news">News</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
			<li>



  <a class="email" title="Submit feedback" href="#" onclick="javascript:window.location='mailto:huanggan1982@gmail.com?subject=Question for Letswave feedback&body=I have some feedback about the Chapter 2-1. Grand Average page: ' + window.location.href;"><i class="fa fa-envelope-o"></i> Feedback</a>

</li>

		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Chapter 2-1. Grand Average">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle"> </li>
  
  
  
      
  
  <li>
      <a href="#">Overview</a>
      <ul>
          
          
          
          <li><a href="index.html">1. Welcome to Letswave</a></li>
          
          
          
          
          
          
          <li><a href="gs_general_info.html">2. General Information</a></li>
          
          
          
          
          
          
          <li><a href="gs_download_and_installation.html">3. Download and Installation</a></li>
          
          
          
          
          
          
          <li><a href="gs_framework.html">4. Letswave Framework</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Letswave Tutorial</a>
      <ul>
          
          
          
          <li><a href="tu_ch0_getting_started.html"><b>0. Getting Started</b></a></li>
          
          
          
          
          
          
          <li><a href="tu_ch1_signal_subject.html"><b>1. Signal Subject</b></a></li>
          
          
          
          
          
          
          <li><a href="tu_ch1_1.html">1.1. Data Import</a></li>
          
          
          
          
          
          
          <li><a href="tu_ch1_2.html">1.2. Preprocessing</a></li>
          
          
          
          
          
          
          <li><a href="tu_ch1_3.html">1.3. ICA Decomposing</a></li>
          
          
          
          
          
          
          <li><a href="tu_ch1_4.html">1.4. Time Domain Analysis</a></li>
          
          
          
          
          
          
          <li><a href="tu_ch1_5.html">1.5. Time-Frequency Analysis</a></li>
          
          
          
          
          
          
          <li><a href="tu_ch2_multiple_subject.html"><b>2. Multiple Subject</b></a></li>
          
          
          
          
          
          
          <li class="active"><a href="tu_ch2_1.html">2.1. Grand Average</a></li>
          
          
          
          
          
          
          <li><a href="tu_ch2_2.html">2.2. Statistical Analysis</a></li>
          
          
          
          
          
          
          <li><a href="tu_ch3_figure_genertaion.html"><b>3. Figure Genertaion</b></a></li>
          
          
          
          
          
          
          <li><a href="tu_ch3_1.html">3.1. Single Subject Result</a></li>
          
          
          
          
          
          
          <li><a href="tu_ch3_2.html">3.2. Multiple Subjects Result</a></li>
          
          
          
          
          
          
          <li><a href="tu_ch4_batch_script.html"><b>4. Batch Processing and Script</b></a></li>
          
          
          
          
          
          
          <li><a href="tu_ch4_1.html">4.1. Assign Batch Processing</a></li>
          
          
          
          
          
          
          <li><a href="tu_ch4_2.html">4.2. Run Batch Processing</a></li>
          
          
          
          
          
          
          <li><a href="tu_ch4_3.html">4.3. Script Generation</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block:
         <p class="external">
             <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
         </p>
         -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">Chapter 2-1. Grand Average</h1>
</div>



<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    


    


    

  <h2 id="step-1-downsampling">Step 1: Downsampling</h2>
<p>Considering the size of the example dataset for uploading and downloading, we downsample the datasets from 1000Hz to 250Hz.</p>

<p>Select datasets “<strong><em>avg bl reref ep_S  9 sp_filter ica chan_interp butt sel_chan sub093</em></strong>” and “<strong><em>avg bl reref ep_S 10 sp_filter ica chan_interp butt sel_chan sub093</em></strong>” and select “<strong>Edit-&gt;Resample Signals-&gt;Downsample signals (integer ratio)</strong>”. In the batch module, set the down sampling ratio to 4. Click the button <strong>Run</strong> for down sampling. Two new datasets with the name “<strong><em>ds avg bl reref ep_S  9 sp_filter ica chan_interp butt sel_chan sub093</em></strong>” and “<strong><em>ds avg bl reref ep_S 10 sp_filter ica chan_interp butt sel_chan sub093</em></strong>” will be appeared in the data list of the manager module.<br />
<br />
<img src="images/tu_ch2_1/Fig061.png" alt="Dataset Rename" /></p>

<h2 id="step-2-dataset-rename">Step 2: Dataset Rename</h2>
<p>In the single subject analysis, we show the process of time domain analysis and time frequency analysis step by step. For each step, there would be new datasets generated with a prefix. In result, the final result of the time domain analysis would be “<strong><em>ds avg bl reref ep_S  9 sp_filter ica chan_interp butt sel_chan sub093</em></strong>” and “<strong><em>ds avg bl reref ep_S 10 sp_filter ica chan_interp butt sel_chan sub093</em></strong>”, which shows the basic information of the processing but would be too long for displaying. Hence, before the multiple subjects analysis, we need to rename the datasets.</p>

<p>Select the dataset “<strong><em>ds avg bl reref ep_S  9 sp_filter ica chan_interp butt sel_chan sub093</em></strong>” and press the <strong>rename</strong> in the right-clicked menu. Rename the dataset “<strong><em>ds avg bl reref ep_S  9 sp_filter ica chan_interp butt sel_chan sub093</em></strong>” to “<strong><em>Sub093 P300 target</em></strong>”. With the similarly, rename the dataset “<strong><em>avg bl reref ep_S 10 sp_filter ica chan_interp butt sel_chan sub093</em></strong>” to “<strong><em>Sub093 P300 nontarget</em></strong>”.
<br />
<img src="images/tu_ch2_1/Fig062.png" alt="Dataset Rename" /></p>

<h2 id="step-3-datasets-copy-and-merge">Step 3: Datasets Copy and Merge</h2>
<p>For the multiple subjects analysis, we need to copy the time domain analysis results into to a new folder. For example, the datasets in the folder <strong>rawdata2</strong> is all the 93 subjects time domain analysis result, which can be downloaded <a href="https://github.com/NOCIONS/letswave7_tutorial/raw/master/rawdata2.zip">here (33M)</a>. Unzip the <strong><em>rawdata2.zip</em></strong> file, there are 93 datasets in 93*2 files.</p>

<p>In the single subject analysis, the result is the average of all the trials for target and nontarget epochs. For multiple subjects analysis, we need firstly to merge the datasets from 93 subjects into one dataset, in which each subject in the new dataset is treated as an epoch. Select the tag “<strong>nontarget</strong>” in the <strong>include</strong> list box from the left part of the manager module, and select all the datasets in the dataset list box in the right part of the manager module. Select “<strong>Edit-&gt;Arrange signals-&gt;Merge dataset epochs, channels, indexes</strong>”. Keep the default setting in the batch module, and click the button <strong>Run</strong> to merge all the selected datasets in the condition of nontarget. 
<br />
<img src="images/tu_ch2_1/Fig065.png" alt="Datasets Merge1" />
<img src="images/tu_ch2_1/Fig066.png" alt="Datasets Merge2" /></p>

<p>In the same way, we can merge all the datasets in the condition of target, in which we should select the tag “<strong>target</strong>” in the <strong>include</strong> list box from the left part of the manager module.</p>

<p>In result, the two new datasets, with 93 epochs for each, “<strong>merge_epoch Sub001 P300 nontarget</strong>” and “<strong>merge_epoch Sub001 P300 target</strong>”, which contain the time domain analysis results from 93 subjects in the conditions of “target” and “nontarget”.</p>

<h2 id="step-4-grand-average">Step 4: Grand Average</h2>
<p>Select the tag “<strong>merge_epoch</strong>” in the <strong>include</strong> list box from the left part of the manager module, and select all the datasets in the dataset list box in the right part of the manager module. Similar with the averaging operation in the single subject level, select <strong>Process-&gt;Average-&gt;Compute average, std, median across epochs</strong>. Keep the default setting in the batch module, and click the button <strong>Run</strong> to average all the epochs in the two datasets, which is actually run the grand average for all the subjects in the conditions of target and nontarget. Two new datasets with the name “<strong>avg merge_epoch Sub001 P300 nontarget</strong>” and “<strong>avg merge_epoch Sub001 P300 target</strong>” will be appeared in the data list of the manager module.
<br />
<img src="images/tu_ch2_1/Fig068.png" alt="Grand Average" /></p>

<h2 id="step-5-view-the-result">Step 5: View the Result</h2>
<p>To view the result of grand average, select the two datasets “<strong>avg merge_epoch Sub001 P300 nontarget</strong>” and “<strong>avg merge_epoch Sub001 P300 target</strong>”, and click the <strong>view</strong> in the right-click menu. In the multiviewer for the waveform, select channel <strong>Pz</strong>, to see the results with the same order as it is in the single subject level, we need to change the order of the datasets. Select the dataset “<strong>avg merge_epoch Sub001 P300 target</strong>” and click the button “<strong>dataset up</strong>”.
<br />
<img src="images/tu_ch2_1/Fig071.png" alt="Grand Average view1" /></p>

<p>Select both the two datasets, and enable the <strong>interval selection</strong> button in the toolbar. Select the interval parameters for <strong>0.2</strong> to <strong>0.7</strong> seconds and click the “<strong>Table</strong>” button, the table for the statistic of maximum, minimum and mean value is popped up, in which we find the peak of the P300 component is 11.22 µV, happened at the 332 ms.<br />
<img src="images/tu_ch2_1/Fig072.png" alt="Grand Average view2" />
<img src="images/tu_ch2_1/Fig073.png" alt="Grand Average view3" /></p>

<p>Enable the <strong>cursor</strong> and the <strong>2D topography</strong> in the toolbar, and set the location of the cursor to be <strong>0.332</strong>. The grand average topography of the P300 experiment can be seen in both the conditions of target and nontarget at the peak time point of the P300 component.<br />
<img src="images/tu_ch2_1/Fig074.png" alt="Grand Average view4" />
<img src="images/tu_ch2_1/Fig075.png" alt="Grand Average view5" /></p>



    <div class="tags">
        
    </div>




</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2018 Letswave.cn. All rights reserved. <br />
 Site last generated: Sep 17, 2018 <br />
                </div>
            </div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

<!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-20762787-5','auto');ga('require','displayfeatures');ga('send','pageview');</script>


</html>
