<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="keywords" content=" ">
<title>Chapter 4-3. Script Generation | Letswave.cn</title>
<link rel="stylesheet" href="css/syntax.css">

<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">-->
<link rel="stylesheet" href="css/modern-business.css">
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<link rel="stylesheet" href="css/customstyles.css">
<link rel="stylesheet" href="css/boxshadowproperties.css">
<!-- most color styles are extracted out to here -->
<link rel="stylesheet" href="css/theme-blue.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="js/jquery.navgoco.min.js"></script>


<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- Anchor.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="js/toc.js"></script>
<script src="js/customscripts.js"></script>

<link rel="shortcut icon" href="images/favicon.ico">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link rel="alternate" type="application/rss+xml" title="" href="http://localhost:4000/feed.xml">

    <script>
        $(document).ready(function() {
            // Initialize navgoco with default options
            $("#mysidebar").navgoco({
                caretHtml: '',
                accordion: true,
                openClass: 'active', // open
                save: false, // leave false or nav highlighting doesn't work right
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 400,
                    easing: 'swing'
                }
            });

            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#mysidebar").navgoco('toggle', true);
            });

        });

    </script>
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
    <script>
        $(document).ready(function() {
            $("#tg-sb-link").click(function() {
                $("#tg-sb-sidebar").toggle();
                $("#tg-sb-content").toggleClass('col-md-9');
                $("#tg-sb-content").toggleClass('col-md-12');
                $("#tg-sb-icon").toggleClass('fa-toggle-on');
                $("#tg-sb-icon").toggleClass('fa-toggle-off');
            });
        });
    </script>
    

</head>
<body>
<!-- Navigation -->
<nav class="navbar navbar-inverse navbar-static-top">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="fa fa-home fa-lg navbar-brand" href="index.html">&nbsp;<span class="projectTitle"> Letswave7</span></a>
        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->




                
                
                
                <li><a href="https://github.com/NOCIONS/letswave7" target="_blank">Download</a></li>
                
                
                
                <li><a href="news">News</a></li>
                
                
                
                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                
                
			<li>



  <a class="email" title="Submit feedback" href="#" onclick="javascript:window.location='mailto:huanggan1982@gmail.com?subject=Question for Letswave feedback&body=I have some feedback about the Chapter 4-3. Script Generation page: ' + window.location.href;"><i class="fa fa-envelope-o"></i> Feedback</a>

</li>

		
                <!--comment out this block if you want to hide search-->
                <li>
                    <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                            SimpleJekyllSearch.init({
                                searchInput: document.getElementById('search-input'),
                                resultsContainer: document.getElementById('results-container'),
                                dataSource: 'search.json',
                                searchResultTemplate: '<li><a href="{url}" title="Chapter 4-3. Script Generation">{title}</a></li>',
                    noResultsText: 'No results found.',
                            limit: 10,
                            fuzzy: true,
                    })
                    </script>
                    <!--end search-->
                </li>
            </ul>
        </div>
        </div>
        <!-- /.container -->
</nav>

<!-- Page Content -->
<div class="container">
  <div id="main">
    <!-- Content Row -->
    <div class="row">
        
        
            <!-- Sidebar Column -->
            <div class="col-md-3" id="tg-sb-sidebar">
                

<ul id="mysidebar" class="nav">
  <li class="sidebarTitle"> </li>
  
  
  
      
  
  <li>
      <a href="#">Overview</a>
      <ul>
          
          
          
          <li><a href="index.html">1. Welcome to Letswave</a></li>
          
          
          
          
          
          
          <li><a href="gs_general_info.html">2. General Information</a></li>
          
          
          
          
          
          
          <li><a href="gs_download_and_installation.html">3. Download and Installation</a></li>
          
          
          
          
          
          
          <li><a href="gs_framework.html">4. Letswave Framework</a></li>
          
          
          
          
      </ul>
   </li>
     
      
  
  <li>
      <a href="#">Letswave Tutorial</a>
      <ul>
          
          
          
          <li><a href="tu_ch0_getting_started.html"><b>0. Getting Started</b></a></li>
          
          
          
          
          
          
          <li><a href="tu_ch1_signal_subject.html"><b>1. Signal Subject</b></a></li>
          
          
          
          
          
          
          <li><a href="tu_ch1_1.html">1.1. Data Import</a></li>
          
          
          
          
          
          
          <li><a href="tu_ch1_2.html">1.2. Preprocessing</a></li>
          
          
          
          
          
          
          <li><a href="tu_ch1_3.html">1.3. ICA Decomposing</a></li>
          
          
          
          
          
          
          <li><a href="tu_ch1_4.html">1.4. Time Domain Analysis</a></li>
          
          
          
          
          
          
          <li><a href="tu_ch1_5.html">1.5. Time-Frequency Analysis</a></li>
          
          
          
          
          
          
          <li><a href="tu_ch2_multiple_subject.html"><b>2. Multiple Subject</b></a></li>
          
          
          
          
          
          
          <li><a href="tu_ch2_1.html">2.1. Grand Average</a></li>
          
          
          
          
          
          
          <li><a href="tu_ch2_2.html">2.2. Statistical Analysis</a></li>
          
          
          
          
          
          
          <li><a href="tu_ch3_figure_genertaion.html"><b>3. Figure Genertaion</b></a></li>
          
          
          
          
          
          
          <li><a href="tu_ch3_1.html">3.1. Single Subject Result</a></li>
          
          
          
          
          
          
          <li><a href="tu_ch3_2.html">3.2. Multiple Subjects Result</a></li>
          
          
          
          
          
          
          <li><a href="tu_ch4_batch_script.html"><b>4. Batch Processing and Script</b></a></li>
          
          
          
          
          
          
          <li><a href="tu_ch4_1.html">4.1. Assign Batch Processing</a></li>
          
          
          
          
          
          
          <li><a href="tu_ch4_2.html">4.2. Run Batch Processing</a></li>
          
          
          
          
          
          
          <li class="active"><a href="tu_ch4_3.html">4.3. Script Generation</a></li>
          
          
          
          
      </ul>
   </li>
     
      
      
      <!-- if you aren't using the accordion, uncomment this block:
         <p class="external">
             <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
         </p>
         -->
</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

            </div>
            
        

        <!-- Content Column -->
        <div class="col-md-9" id="tg-sb-content">
            <div class="post-header">
   <h1 class="post-title-main">Chapter 4-3. Script Generation</h1>
</div>



<div class="post-content">

   

    
    
<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>

<div id="toc"></div>

    


    


    

  <h3 id="script-in-letswave7">Script in Letswave7</h3>
<p>In addition to the graphical user interface (GUI), script may be the most commonly used feature in Letswave7. Script provides users more freedom in the EEG processing, but also requires users to have a more solid programming foundation, which makes it difficult for the researchers without relevant backgrounds to use. Letswave7 is dedicated to solving this problem.</p>

<h4 id="script-of-batch-processing">Script of Batch Processing</h4>
<p>In Letswave7, the system runs a batch processing by running the corresponding Matlab script. Once the processing flow has been made, the corresponding Matlab script has already been generated automatically. Users can click the “<strong>script</strong>” button in the batch module to get the full script. Once the users have learned the use of GUI, they almost already understand the writing of script. <br />
<img src="images/tu_ch4_3/Fig423.png" alt="Script of Batch Processing" />
<img src="images/tu_ch4_3/Fig424.png" alt="Script of Batch Processing" /></p>

<h4 id="script-of-single-step">Script of Single Step</h4>
<p>The script for the single step operation can also be obtained with the “<strong>script</strong>” button in the lower right corner in each step of batch processing, which can tangibly reduce the users’ dependence on the tutorial and the help document. This feature is essential, since it can effectively help the script-based user to speed up the script writing and improve the quality of the script. More importantly, it can really reduce the script-based user’s entry threshold. Even the users without a solid background for Matlab programming are able to write high quality script for batch EEG signal processing.<br />
<img src="images/tu_ch4_3/Fig423b.png" alt="Script of Batch Processing" /></p>

<p>In Letswave7, we provide a rich function library for the script-based users, which are starting with <strong>FLW_</strong>. The grammar of all the functions in this library is uniform. For one step of operation, we need just need define the option and then call the corresponding FLW function.</p>

<div class="language-matlab highlighter-rouge"><pre class="highlight"><code><span class="n">option</span><span class="o">=</span><span class="nb">struct</span><span class="p">(</span><span class="s1">'XXX'</span><span class="p">,</span><span class="n">xxx</span><span class="p">,</span><span class="s1">'XXX'</span><span class="p">,</span><span class="n">xxx</span><span class="p">);</span>             
<span class="n">lwdata</span><span class="o">=</span> <span class="n">FLW_XXX</span><span class="o">.</span><span class="n">get_lwdata</span><span class="p">(</span><span class="n">lwdata</span><span class="p">,</span><span class="n">option</span><span class="p">);</span>
</code></pre>
</div>

<p>The parameters setting in the option is identical to the parameters selection in the GUI. It just needs to be noticed whether the input and output of the function is a single dataset or multiple datasets.</p>

<h4 id="easy-access-to-the-data">Easy Access to the Data</h4>
<p>Each dataset can be easily accessed by clicking “<strong>send to workspace</strong>” in the right menu in the manager module, which would be appeared as a variable with the name of “<strong>lwdata</strong>” in the workspace of Matlab. Then the script-based user can make their own operation on the dataset in Matlab. After the operation, the user can also save the dataset in the format of Letswave by clicking “<strong>read from workspace</strong>” in the right menu in the manager module.</p>

<p>Similarly, the other information is also easily to be accessed in the other modules, such as the event information, the channel name and statistical result about the mean, maximum and minimum value.</p>

<h4 id="script-of-data-importing-and-figure-generation">Script of Data Importing and Figure Generation</h4>
<p>Not only the operations in the batch module, the other operations, like data import and figure generation, can also be scriptlized. Hence, from data import, to preprocessing, time/frequency analysis and statistical analysis, to the final figure generation, the whole process for the EEG signal signal analysis can be easily and quickly written as a script.</p>

<h3 id="example">Example</h3>
<p>Here, we repeat the data analysis of the P300 dataset for example to demonstrate the use of script in Letswave7.</p>

<h4 id="script-1-data-importing">Script 1 Data Importing</h4>
<p>Switch the Letswave path to “<strong>rawdata1</strong>”. Open the dialog of the data importing and select the dataset “Sub093.eeg”. Instead of clicking the button <strong>Run</strong>, we can click the button <strong>script</strong> to obtain the script for data import, which can be download as <a href="images/tu_ch4_3/script1.m.zip">script1.m</a>. Run script1 in Matlab, we can also load the dataset “Sub093” as it is by clicking the button <strong>Run</strong>.<br />
<img src="images/tu_ch4_3/Fig425.png" alt="Script 1 Data Importing1" />
<img src="images/tu_ch4_3/Fig426.png" alt="Script 1 Data Importing2" /></p>

<h4 id="script-2-single-subject-analysis">Script 2 Single Subject Analysis</h4>
<p>Open the batch processing “<strong>P300 Process.lw_script</strong>” that we saved in <a href="tu_ch4_2.html">Chapter 4-2</a>. Add the time-frequency analysis in <a href="tu_ch1_5.html">Chapter 1.5</a>. Instead of clicking the button <strong>Run</strong>, we can click the button <strong>script</strong> to have the script for single subject analysis, which can be download as <a href="images/tu_ch4_3/script2.m.zip">script2.m</a>. Run script2 in Matlab, we can also finish the single subject analysis as it is done in <a href="tu_ch1_signal_subject.html">Chapter 1</a>. <br />
<img src="images/tu_ch4_3/Fig423.png" alt="Script 2 Single Subject Analysis" />
<img src="images/tu_ch4_3/Fig424.png" alt="Script 2 Single Subject Analysis" /></p>

<h4 id="script-3-single-subject-analysis-edited">Script 3 Single Subject Analysis (Edited)</h4>
<p>Once you are familiar with Letswave script and Matlab programming, you can combine the two scripts into <a href="images/tu_ch4_3/script3.m.zip">script3.m</a> and edit it to improve efficient and change the name of the datasets for the further multiple subjects analysis.</p>

<p>Run the <a href="images/tu_ch4_3/script3.m.zip">script3.m</a> in Matlab, we can have the averaged result “<strong>Sub093 P300 target</strong>” and “<strong>Sub093 P300 nontarget</strong>” for time domain analysis, “<strong>cwt Sub093 P300 target</strong>” and “<strong>cwt Sub093 P300 nontarget</strong>” for time frequency domain analysis.</p>

<h4 id="script-4-figure-for-single-subject">Script 4 Figure for Single Subject</h4>
<p>Select the dataset “Sub093 P300 nontarget.lw6”, “Sub093 P300 target.lw6”, “cwt Sub093 P300 target.lw6”, “cwt Sub093 P300 nontarget.lw6”. We can make the figure as it is shown in <a href="tu_ch3_1.html">Chapter 3.1</a>. Click the button <strong>script</strong> to get the script for figure generation which can be download as <a href="images/tu_ch4_3/script4.m.zip">script4.m</a>. Run the script4 in Matlab, we can have the similar figures, but the position of the legend need to be adjusted. <br /> 
<img src="images/tu_ch3_1/Fig252.png" alt="Script 4 Figure for Single Subject" /></p>

<h4 id="script-5-multiple-subjects-analysis">Script 5 Multiple Subjects Analysis</h4>
<p>Switch the path of Letswave to “<strong>rawdata2</strong>” and repeat the operation of grand average and statistical analysis in <a href="tu_ch2_1.html">Chapter 2-1</a> and <a href="tu_ch2_2.html">Chapter 2-2</a>. After the editing by the String manipulation and adding a for loop, we can have the script for multiple subjects analysis, which can be download as <a href="images/tu_ch4_3/script5.m.zip">script5.m</a>.</p>

<p>Run the script5 in Matlab, we can have the exactly the same result as it is in <a href="tu_ch2_1.html">Chapter 2-1</a> and <a href="tu_ch2_2.html">Chapter 2-2</a>. <br /></p>


    <div class="tags">
        
    </div>




</div>

<hr class="shaded"/>

<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2018 Letswave.cn. All rights reserved. <br />
 Site last generated: Sep 17, 2018 <br />
                </div>
            </div>
</footer>


        </div>
    <!-- /.row -->
</div>
<!-- /.container -->
</div>
<!-- /#main -->
    </div>

</body>

<!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-20762787-5','auto');ga('require','displayfeatures');ga('send','pageview');</script>


</html>
